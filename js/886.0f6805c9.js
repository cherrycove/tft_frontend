"use strict";(self["webpackChunktft_frontend"]=self["webpackChunktft_frontend"]||[]).push([[886],{507:function(t,e,i){var a=i(9565);t.exports=function(t,e,i){var n,o,l=i?t:t.iterator,s=t.next;while(!(n=a(s,l)).done)if(o=e(n.value),void 0!==o)return o}},1148:function(t,e,i){var a=i(6518),n=i(9565),o=i(2652),l=i(9306),s=i(8551),r=i(1767),c=i(9539),u=i(4549),p=u("every",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:p},{every:function(t){s(this);try{l(t)}catch(a){c(this,"throw",a)}if(p)return n(p,this,t);var e=r(this),i=0;return!o(e,function(e,a){if(!t(e,i++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1698:function(t,e,i){var a=i(6518),n=i(4204),o=i(9835),l=i(4916),s=!l("union")||!o("union");a({target:"Set",proto:!0,real:!0,forced:s},{union:n})},1701:function(t,e,i){var a=i(6518),n=i(9565),o=i(9306),l=i(8551),s=i(1767),r=i(9462),c=i(6319),u=i(9539),p=i(684),d=i(4549),m=i(6395),g=!m&&!p("map",function(){}),f=!m&&!g&&d("map",TypeError),v=m||g||f,h=r(function(){var t=this.iterator,e=l(n(this.next,t)),i=this.done=!!e.done;if(!i)return c(t,this.mapper,[e.value,this.counter++],!0)});a({target:"Iterator",proto:!0,real:!0,forced:v},{map:function(t){l(this);try{o(t)}catch(e){u(this,"throw",e)}return f?n(f,this,t):new h(s(this),{mapper:t})}})},2475:function(t,e,i){var a=i(6518),n=i(8527),o=i(4916),l=!o("isSupersetOf",function(t){return!t});a({target:"Set",proto:!0,real:!0,forced:l},{isSupersetOf:n})},3440:function(t,e,i){var a=i(7080),n=i(4402),o=i(9286),l=i(5170),s=i(3789),r=i(8469),c=i(507),u=n.has,p=n.remove;t.exports=function(t){var e=a(this),i=s(t),n=o(e);return l(e)<=i.size?r(e,function(t){i.includes(t)&&p(n,t)}):c(i.getIterator(),function(t){u(n,t)&&p(n,t)}),n}},3650:function(t,e,i){var a=i(7080),n=i(4402),o=i(9286),l=i(3789),s=i(507),r=n.add,c=n.has,u=n.remove;t.exports=function(t){var e=a(this),i=l(t).getIterator(),n=o(e);return s(i,function(t){c(e,t)?u(n,t):r(n,t)}),n}},3789:function(t,e,i){var a=i(9306),n=i(8551),o=i(9565),l=i(1291),s=i(1767),r="Invalid size",c=RangeError,u=TypeError,p=Math.max,d=function(t,e){this.set=t,this.size=p(e,0),this.has=a(t.has),this.keys=a(t.keys)};d.prototype={getIterator:function(){return s(n(o(this.keys,this.set)))},includes:function(t){return o(this.has,this.set,t)}},t.exports=function(t){n(t);var e=+t.size;if(e!==e)throw new u(r);var i=l(e);if(i<0)throw new c(r);return new d(t,i)}},3838:function(t,e,i){var a=i(7080),n=i(5170),o=i(8469),l=i(3789);t.exports=function(t){var e=a(this),i=l(t);return!(n(e)>i.size)&&!1!==o(e,function(t){if(!i.includes(t))return!1},!0)}},3853:function(t,e,i){var a=i(6518),n=i(4449),o=i(4916),l=!o("isDisjointFrom",function(t){return!t});a({target:"Set",proto:!0,real:!0,forced:l},{isDisjointFrom:n})},3886:function(t,e,i){i.r(e),i.d(e,{default:function(){return pt}});var a=i(641),n=i(33);const o={class:"compositions-container"},l={class:"card-header"},s={class:"header-actions"},r={key:1},c={class:"composition-list"},u={class:"composition-header"},p={class:"composition-info"},d={class:"population-badge"},m={class:"cost-badge"},g={class:"composition-traits"},f={class:"composition-champions"},v={class:"champion-name"},h={key:0,class:"composition-detail"},k={class:"composition-detail-header"},b={class:"composition-detail-info"},_={class:"detail-badges"},C={class:"population-badge"},y={class:"cost-badge"},F={class:"detail-version"},L={class:"composition-detail-traits"},E={class:"trait-grid"},w={class:"trait-detail-header"},T={class:"trait-name"},z={class:"trait-detail-level"},S={class:"trait-detail-effect"},X={class:"composition-detail-champions"},x={class:"champion-traits"};function I(t,e,i,I,W,D){const V=(0,a.g2)("el-option"),K=(0,a.g2)("el-select"),O=(0,a.g2)("el-form-item"),A=(0,a.g2)("el-input-number"),R=(0,a.g2)("el-option-group"),j=(0,a.g2)("el-button"),$=(0,a.g2)("el-form"),U=(0,a.g2)("el-card"),P=(0,a.g2)("el-col"),q=(0,a.g2)("el-row"),Q=(0,a.g2)("el-empty"),B=(0,a.g2)("el-tag"),H=(0,a.g2)("el-pagination"),G=(0,a.g2)("el-divider"),N=(0,a.g2)("el-table-column"),M=(0,a.g2)("el-table"),J=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(q,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(P,{span:24},{default:(0,a.k6)(()=>[(0,a.bF)(U,{class:"filter-card"},{header:(0,a.k6)(()=>[...e[9]||(e[9]=[(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("span",null,"组合筛选")],-1)])]),default:(0,a.k6)(()=>[(0,a.bF)($,{inline:!0,model:I.filterForm,class:"filter-form"},{default:(0,a.k6)(()=>[(0,a.bF)(O,{label:"人口"},{default:(0,a.k6)(()=>[(0,a.bF)(K,{modelValue:I.filterForm.population,"onUpdate:modelValue":e[0]||(e[0]=t=>I.filterForm.population=t),placeholder:"选择人口",clearable:""},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.populationOptions,t=>((0,a.uX)(),(0,a.Wv)(V,{key:t,label:`${t}人口`,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(O,{label:"费用范围"},{default:(0,a.k6)(()=>[(0,a.bF)(A,{modelValue:I.filterForm.minCost,"onUpdate:modelValue":e[1]||(e[1]=t=>I.filterForm.minCost=t),min:0,max:100,placeholder:"最小"},null,8,["modelValue"]),e[10]||(e[10]=(0,a.Lk)("span",{class:"separator"},"-",-1)),(0,a.bF)(A,{modelValue:I.filterForm.maxCost,"onUpdate:modelValue":e[2]||(e[2]=t=>I.filterForm.maxCost=t),min:0,max:100,placeholder:"最大"},null,8,["modelValue"])]),_:1}),(0,a.bF)(O,{label:"羁绊"},{default:(0,a.k6)(()=>[(0,a.bF)(K,{modelValue:I.filterForm.traits,"onUpdate:modelValue":e[3]||(e[3]=t=>I.filterForm.traits=t),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"选择羁绊"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.traitGroups,t=>((0,a.uX)(),(0,a.Wv)(R,{key:t.type,label:t.label},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.traits,t=>((0,a.uX)(),(0,a.Wv)(V,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(O,{label:"最高羁绊等级"},{default:(0,a.k6)(()=>[(0,a.bF)(K,{modelValue:I.filterForm.minHighestTraitLevel,"onUpdate:modelValue":e[4]||(e[4]=t=>I.filterForm.minHighestTraitLevel=t),placeholder:"选择最低等级",clearable:""},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.highestTraitLevelOptions,t=>((0,a.uX)(),(0,a.Wv)(V,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)(()=>[(0,a.bF)(j,{type:"primary",onClick:I.handleFilter},{default:(0,a.k6)(()=>[...e[11]||(e[11]=[(0,a.eW)("筛选",-1)])]),_:1},8,["onClick"]),(0,a.bF)(j,{onClick:I.resetFilter},{default:(0,a.k6)(()=>[...e[12]||(e[12]=[(0,a.eW)("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(q,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(P,{span:24},{default:(0,a.k6)(()=>[(0,a.bF)(U,{class:"composition-list-card"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",l,[(0,a.Lk)("span",null,"组合列表 ("+(0,n.v_)(I.filteredCompositions.length)+")",1),(0,a.Lk)("div",s,[(0,a.bF)(K,{modelValue:I.sortOption,"onUpdate:modelValue":e[5]||(e[5]=t=>I.sortOption=t),placeholder:"排序",size:"small"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"费用升序",value:"costAsc"}),(0,a.bF)(V,{label:"费用降序",value:"costDesc"}),(0,a.bF)(V,{label:"人口升序",value:"popAsc"}),(0,a.bF)(V,{label:"人口降序",value:"popDesc"}),(0,a.bF)(V,{label:"羁绊数升序",value:"traitAsc"}),(0,a.bF)(V,{label:"羁绊数降序",value:"traitDesc"})]),_:1},8,["modelValue"])])])]),default:(0,a.k6)(()=>[I.loading||0!==I.filteredCompositions.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(Q,{key:0,description:"没有找到组合"})),I.filteredCompositions.length>0?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.paginatedCompositions,t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"composition-item"},[(0,a.bF)(U,{"body-style":{padding:"0px"},class:"composition-card"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[(0,a.Lk)("div",d,(0,n.v_)(t.population)+"人口",1),(0,a.Lk)("div",m,(0,n.v_)(t.total_cost)+"金币",1)]),(0,a.bF)(j,{type:"primary",size:"small",onClick:e=>I.showCompositionDetail(t)},{default:(0,a.k6)(()=>[...e[13]||(e[13]=[(0,a.eW)(" 查看详情 ",-1)])]),_:2},1032,["onClick"])]),(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.filterSpecialTraits(t.trait_counts),t=>((0,a.uX)(),(0,a.CE)("div",{key:t.trait.id,class:"trait-count"},[(0,a.bF)(B,{class:(0,n.C4)(I.getTagClass(t.active_tag)),effect:"dark",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(t.trait.name)+" "+(0,n.v_)(t.count),1)]),_:2},1032,["class"])]))),128))]),(0,a.Lk)("div",f,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.champions,t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"champion-item-small"},[(0,a.Lk)("div",{class:(0,n.C4)(["champion-cost-indicator",`cost-${t.cost}`])},(0,n.v_)(t.cost),3),(0,a.Lk)("span",v,(0,n.v_)(t.name),1)]))),128))])]),_:2},1024)]))),128))]),(0,a.bF)(H,{"current-page":I.currentPage,"onUpdate:currentPage":e[6]||(e[6]=t=>I.currentPage=t),"page-size":I.pageSize,"onUpdate:pageSize":e[7]||(e[7]=t=>I.pageSize=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:I.filteredCompositions.length,onSizeChange:I.handleSizeChange,onCurrentChange:I.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.bF)(J,{modelValue:I.compositionDetailVisible,"onUpdate:modelValue":e[8]||(e[8]=t=>I.compositionDetailVisible=t),title:"组合详情",width:"60%"},{default:(0,a.k6)(()=>[I.selectedComposition?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.Lk)("div",k,[(0,a.Lk)("div",b,[(0,a.Lk)("div",_,[(0,a.Lk)("div",C,(0,n.v_)(I.selectedComposition.population)+"人口",1),(0,a.Lk)("div",y,(0,n.v_)(I.selectedComposition.total_cost)+"金币",1)]),(0,a.Lk)("div",F,"版本: "+(0,n.v_)(I.selectedComposition.version),1)])]),(0,a.bF)(G),(0,a.Lk)("div",L,[e[14]||(e[14]=(0,a.Lk)("h3",null,"激活羁绊:",-1)),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.filterSpecialTraits(I.selectedComposition.trait_counts),t=>((0,a.uX)(),(0,a.CE)("div",{key:t.trait.id,class:"trait-detail-item"},[(0,a.Lk)("div",w,[(0,a.Lk)("span",T,(0,n.v_)(t.trait.name),1),(0,a.bF)(B,{class:(0,n.C4)(I.getTagClass(t.active_tag)),effect:"dark",size:"small"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(t.count)+"/"+(0,n.v_)(I.getRequiredCount(t)),1)]),_:2},1032,["class"])]),(0,a.Lk)("div",z," 等级 "+(0,n.v_)(t.active_level),1),(0,a.Lk)("div",S,(0,n.v_)(I.getTraitEffect(t)),1)]))),128))])]),(0,a.bF)(G),(0,a.Lk)("div",X,[e[15]||(e[15]=(0,a.Lk)("h3",null,"棋子列表:",-1)),(0,a.bF)(M,{data:I.selectedComposition.champions,style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(N,{label:"费用",width:"80"},{default:(0,a.k6)(t=>[(0,a.Lk)("div",{class:(0,n.C4)(["champion-cost-indicator",`cost-${t.row.cost}`])},(0,n.v_)(t.row.cost),3)]),_:1}),(0,a.bF)(N,{prop:"name",label:"名称",width:"120"}),(0,a.bF)(N,{label:"羁绊"},{default:(0,a.k6)(t=>[(0,a.Lk)("div",x,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.row.traits,t=>((0,a.uX)(),(0,a.Wv)(B,{key:t.id,type:"origin"===t.type?"success":"primary",size:"small",class:"trait-tag"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(t.name),1)]),_:2},1032,["type"]))),128))])]),_:1})]),_:1},8,["data"])])])):(0,a.Q3)("",!0)]),_:1},8,["modelValue"])])}i(4114),i(8111),i(1148),i(2489),i(116),i(7588),i(1701),i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698);var W=i(953),D=i(6278);const V={class:"composition-detail"},K={class:"composition-detail-header"},O={class:"composition-detail-info"},A={class:"detail-badges"},R={class:"population-badge"},j={class:"cost-badge"},$={class:"detail-version"},U={class:"composition-detail-traits"},P={class:"trait-grid"},q={class:"trait-detail-header"},Q={class:"trait-name"},B={class:"trait-detail-level"},H={class:"trait-detail-effect"},G={class:"inactive-traits"},N={class:"composition-detail-champions"},M={class:"champion-grid"};function J(t,e,i,o,l,s){const r=(0,a.g2)("el-divider"),c=(0,a.g2)("trait-tag"),u=(0,a.g2)("ChampionDisplayCard");return(0,a.uX)(),(0,a.CE)("div",V,[(0,a.Lk)("div",K,[(0,a.Lk)("div",O,[(0,a.Lk)("div",A,[(0,a.Lk)("div",R,(0,n.v_)(i.composition.population)+"人口",1),(0,a.Lk)("div",j,(0,n.v_)(i.composition.total_cost)+"金币",1)]),(0,a.Lk)("div",$,"版本: "+(0,n.v_)(i.composition.version),1)])]),(0,a.bF)(r),(0,a.Lk)("div",U,[e[1]||(e[1]=(0,a.Lk)("h3",null,"激活羁绊:",-1)),(0,a.Lk)("div",P,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.activeTraits,t=>((0,a.uX)(),(0,a.CE)("div",{key:t.trait.id,class:"trait-detail-item"},[(0,a.Lk)("div",q,[(0,a.Lk)("span",Q,(0,n.v_)(t.trait.name),1),(0,a.bF)(c,{trait:t.trait,"active-level":t.active_level,count:t.count,"show-count":!0},null,8,["trait","active-level","count"])]),(0,a.Lk)("div",B," 等级 "+(0,n.v_)(t.active_level),1),(0,a.Lk)("div",H,(0,n.v_)(o.getTraitEffect(t)),1)]))),128))]),o.inactiveTraits.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[e[0]||(e[0]=(0,a.Lk)("h4",null,"未激活羁绊:",-1)),(0,a.Lk)("div",G,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.inactiveTraits,t=>((0,a.uX)(),(0,a.Wv)(c,{key:t.trait.id,trait:t.trait,count:t.count,"show-count":!0},null,8,["trait","count"]))),128))])],64)):(0,a.Q3)("",!0)]),(0,a.bF)(r),(0,a.Lk)("div",N,[e[2]||(e[2]=(0,a.Lk)("h3",null,"棋子列表:",-1)),(0,a.Lk)("div",M,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.composition.champions,t=>((0,a.uX)(),(0,a.Wv)(u,{key:t.id,champion:t,"is-admin":!1},null,8,["champion"]))),128))])])])}var Y=i(7364);const Z={key:0,class:"trait-count"},tt={key:1,class:"trait-level"};function et(t,e,i,o,l,s){const r=(0,a.g2)("el-tag");return(0,a.uX)(),(0,a.Wv)(r,{type:o.getTraitTagType(i.trait.type,i.activeLevel),effect:i.activeLevel?"dark":"plain",size:"small",onClick:e[0]||(e[0]=e=>t.$emit("click",i.trait))},{default:(0,a.k6)(()=>[(0,a.RG)(t.$slots,"default",{},()=>[(0,a.eW)((0,n.v_)(i.trait.name)+" ",1),i.showCount&&void 0!==i.count?((0,a.uX)(),(0,a.CE)("span",Z,(0,n.v_)(i.count),1)):(0,a.Q3)("",!0),i.showLevel&&void 0!==i.activeLevel?((0,a.uX)(),(0,a.CE)("span",tt,"("+(0,n.v_)(i.activeLevel)+")",1)):(0,a.Q3)("",!0)],!0)]),_:3},8,["type","effect"])}var it={name:"TraitTag",props:{trait:{type:Object,required:!0},activeLevel:{type:Number,default:void 0},count:{type:Number,default:void 0},showCount:{type:Boolean,default:!1},showLevel:{type:Boolean,default:!1}},emits:["click"],setup(){const t=(t,e)=>e?"origin"===t?"success":"primary":"";return{getTraitTagType:t}}},at=i(6262);const nt=(0,at.A)(it,[["render",et],["__scopeId","data-v-7bee0133"]]);var ot=nt,lt={name:"CompositionDetail",components:{ChampionDisplayCard:Y.A,TraitTag:ot},props:{composition:{type:Object,required:!0}},setup(t){const e=(0,D.Pj)(),i=(0,a.EW)(()=>e.state.traits.traitLevels),n=(0,a.EW)(()=>t.composition.trait_counts.filter(t=>t.active_level)),o=(0,a.EW)(()=>t.composition.trait_counts.filter(t=>!t.active_level&&t.count>0)),l=t=>{if(!t.active_level||!i.value[t.trait.id])return"未知效果";const e=i.value[t.trait.id],a=e.find(e=>e.level===t.active_level);return a?a.effect_description:"未知效果"};return{activeTraits:n,inactiveTraits:o,getTraitEffect:l}}};const st=(0,at.A)(lt,[["render",J],["__scopeId","data-v-667cb986"]]);var rt=st,ct={name:"CompositionsView",setup(){const t=(0,D.Pj)(),e=(0,a.EW)(()=>t.state.compositions.compositions),i=(0,a.EW)(()=>t.state.traits.traits),n=(0,a.EW)(()=>t.state.traits.traitLevels),o=(0,a.EW)(()=>t.state.compositions.loading),l=(0,W.KR)(1),s=(0,W.KR)(20),r=(0,W.KR)("costAsc"),c=(0,W.Kh)({population:null,minCost:null,maxCost:null,traits:[],minHighestTraitLevel:null}),u=(0,W.KR)(!1),p=(0,W.KR)(null),d=[1,2,3,4,5,6,7,8,9,10],m=(0,a.EW)(()=>{const t={origin:{type:"origin",label:"种族",traits:[]},class:{type:"class",label:"职业",traits:[]}};return i.value.forEach(e=>{"origin"===e.type?t.origin.traits.push(e):"class"===e.type&&t.class.traits.push(e)}),Object.values(t)}),g=[{label:"黄铜级以上",value:1},{label:"白银级以上",value:2},{label:"黄金级以上",value:3},{label:"棱彩级以上",value:4}],f=(0,a.EW)(()=>e.value?e.value.filter(t=>{const{population:e,minCost:i,maxCost:a,traits:n,minHighestTraitLevel:o}=c;if(e&&t.population!==e)return!1;if(null!==i&&t.total_cost<i)return!1;if(null!==a&&t.total_cost>a)return!1;if(n&&n.length>0){const e=new Set((t.trait_counts||[]).map(t=>t.trait.id));if(!n.every(t=>e.has(t)))return!1}if(null!==o){const e=Math.max(0,...(t.trait_counts||[]).map(t=>t.active_level||0));if(e<o)return!1}return!0}):[]),v=(0,a.EW)(()=>{if(!f.value)return[];const t=[...f.value];switch(r.value){case"costAsc":t.sort((t,e)=>t.total_cost-e.total_cost);break;case"costDesc":t.sort((t,e)=>e.total_cost-t.total_cost);break;case"popAsc":t.sort((t,e)=>t.population-e.population);break;case"popDesc":t.sort((t,e)=>e.population-t.population);break;case"traitAsc":t.sort((t,e)=>{const i=(t.trait_counts||[]).filter(t=>t.active_level).length,a=(e.trait_counts||[]).filter(t=>t.active_level).length;return i-a});break;case"traitDesc":t.sort((t,e)=>{const i=(t.trait_counts||[]).filter(t=>t.active_level).length,a=(e.trait_counts||[]).filter(t=>t.active_level).length;return a-i});break}return t}),h=(0,a.EW)(()=>{const t=(l.value-1)*s.value,e=t+s.value;return v.value.slice(t,e)}),k=()=>{l.value=1},b=()=>{c.population=null,c.minCost=null,c.maxCost=null,c.traits=[],c.minHighestTraitLevel=null,l.value=1},_=t=>{s.value=t},C=t=>{l.value=t},y=t=>{p.value=t,u.value=!0},F=t=>{switch(t){case"黄铜":return"tag-bronze";case"白银":return"tag-silver";case"黄金":return"tag-gold";case"棱彩":return"tag-prismatic";default:return"tag-default"}},L=t=>{if(!t.active_level||!n.value[t.trait.id])return"?";const e=n.value[t.trait.id],i=e.find(e=>e.level===t.active_level);return i?i.required_count:"?"},E=t=>{if(!t.active_level||!n.value[t.trait.id])return"未知效果";const e=n.value[t.trait.id],i=e.find(e=>e.level===t.active_level);return i?i.effect_description:"未知效果"},w=t=>t?t.filter(t=>"大宗师"!==t.trait.name||(1===t.count||t.count>=4)):[];return(0,a.wB)(r,()=>{l.value=1}),(0,a.sV)(()=>{t.dispatch("compositions/fetchCompositions"),t.dispatch("traits/fetchTraits")}),{compositions:e,traits:i,traitLevels:n,loading:o,currentPage:l,pageSize:s,sortOption:r,filterForm:c,compositionDetailVisible:u,selectedComposition:p,populationOptions:d,traitGroups:m,filteredCompositions:f,sortedCompositions:v,paginatedCompositions:h,handleFilter:k,resetFilter:b,handleSizeChange:_,handleCurrentChange:C,showCompositionDetail:y,getTagClass:F,getRequiredCount:L,getTraitEffect:E,highestTraitLevelOptions:g,filterSpecialTraits:w,CompositionDetail:rt}}};const ut=(0,at.A)(ct,[["render",I],["__scopeId","data-v-72d72856"]]);var pt=ut},4204:function(t,e,i){var a=i(7080),n=i(4402).add,o=i(9286),l=i(3789),s=i(507);t.exports=function(t){var e=a(this),i=l(t).getIterator(),r=o(e);return s(i,function(t){n(r,t)}),r}},4402:function(t,e,i){var a=i(9504),n=Set.prototype;t.exports={Set:Set,add:a(n.add),has:a(n.has),remove:a(n["delete"]),proto:n}},4449:function(t,e,i){var a=i(7080),n=i(4402).has,o=i(5170),l=i(3789),s=i(8469),r=i(507),c=i(9539);t.exports=function(t){var e=a(this),i=l(t);if(o(e)<=i.size)return!1!==s(e,function(t){if(i.includes(t))return!1},!0);var u=i.getIterator();return!1!==r(u,function(t){if(n(e,t))return c(u,"normal",!1)})}},4916:function(t,e,i){var a=i(7751),n=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},o=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var i=a("Set");try{(new i)[t](n(0));try{return(new i)[t](n(-1)),!1}catch(s){if(!e)return!0;try{return(new i)[t](o(-1/0)),!1}catch(r){var l=new i;return l.add(1),l.add(2),e(l[t](o(1/0)))}}}catch(r){return!1}}},5024:function(t,e,i){var a=i(6518),n=i(3650),o=i(9835),l=i(4916),s=!l("symmetricDifference")||!o("symmetricDifference");a({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:n})},5170:function(t,e,i){var a=i(6706),n=i(4402);t.exports=a(n.proto,"size","get")||function(t){return t.size}},5876:function(t,e,i){var a=i(6518),n=i(3838),o=i(4916),l=!o("isSubsetOf",function(t){return t});a({target:"Set",proto:!0,real:!0,forced:l},{isSubsetOf:n})},6706:function(t,e,i){var a=i(9504),n=i(9306);t.exports=function(t,e,i){try{return a(n(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(o){}}},7080:function(t,e,i){var a=i(4402).has;t.exports=function(t){return a(t),t}},7364:function(t,e,i){i.d(e,{A:function(){return y}});var a=i(641),n=i(33),o=i(3751);const l={class:"image-wrapper"},s=["src","alt"],r={class:"overlay"},c={class:"trait-list"},u=["src","alt"],p={class:"trait-name"},d={key:0,class:"admin-actions"},m={class:"bottom-bar"},g={class:"champion-name"},f={class:"champion-cost"};function v(t,e,i,v,h,k){const b=(0,a.g2)("Edit"),_=(0,a.g2)("el-icon"),C=(0,a.g2)("el-button"),y=(0,a.g2)("Delete"),F=(0,a.g2)("Coin");return(0,a.uX)(),(0,a.CE)("div",{class:"champion-card-reborn",onClick:e[2]||(e[2]=e=>t.$emit("click",i.champion))},[(0,a.Lk)("div",l,[(0,a.Lk)("img",{src:i.champion.image_url,class:"bg-image",alt:i.champion.name},null,8,s),(0,a.Lk)("div",r,[(0,a.Lk)("ul",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.sortedTraits,t=>((0,a.uX)(),(0,a.CE)("li",{key:t.id,class:"trait-item"},[(0,a.Lk)("img",{src:v.getTraitIcon(t.name),alt:t.name,class:"trait-icon"},null,8,u),(0,a.Lk)("span",p,(0,n.v_)(t.name),1)]))),128))])]),i.isAdmin?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(C,{circle:"",type:"primary",size:"small",onClick:e[0]||(e[0]=(0,o.D$)(e=>t.$emit("edit",i.champion),["stop"]))},{default:(0,a.k6)(()=>[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(b)]),_:1})]),_:1}),(0,a.bF)(C,{circle:"",type:"danger",size:"small",onClick:e[1]||(e[1]=(0,o.D$)(e=>t.$emit("delete",i.champion),["stop"]))},{default:(0,a.k6)(()=>[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(y)]),_:1})]),_:1})])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[(0,a.Lk)("h3",g,(0,n.v_)(i.champion.name),1),(0,a.Lk)("div",f,[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(F)]),_:1}),(0,a.Lk)("span",null,(0,n.v_)(i.champion.cost),1)])])])}var h=i(8548),k=i(8192),b={name:"ChampionDisplayCard",components:{Coin:h.KOj,Edit:h.ffu,Delete:h.epd},props:{champion:{type:Object,required:!0},isAdmin:{type:Boolean,default:!1}},emits:["edit","delete","click"],setup(t){const e=(0,a.EW)(()=>t.champion&&t.champion.traits?[...t.champion.traits].sort((t,e)=>"origin"===t.type&&"origin"!==e.type?-1:"origin"!==t.type&&"origin"===e.type?1:0):[]);return{getTraitIcon:k.Sc,sortedTraits:e}}},_=i(6262);const C=(0,_.A)(b,[["render",v],["__scopeId","data-v-22fd1072"]]);var y=C},7642:function(t,e,i){var a=i(6518),n=i(3440),o=i(9039),l=i(4916),s=!l("difference",function(t){return 0===t.size}),r=s||o(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var i=t++>1;return e.has(1)&&e.clear(),{done:i,value:2}}}}},e=new Set([1,2,3,4]);return 3!==e.difference(t).size});a({target:"Set",proto:!0,real:!0,forced:r},{difference:n})},8004:function(t,e,i){var a=i(6518),n=i(9039),o=i(8750),l=i(4916),s=!l("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||n(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});a({target:"Set",proto:!0,real:!0,forced:s},{intersection:o})},8192:function(t,e,i){i.d(e,{Sc:function(){return n},qB:function(){return o}});const a={"护卫":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10204.png","裁决使者":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10205.png","决斗大师":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10206.png","刀锋领主":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10207.png","重量级斗士":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10208.png","主宰":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10209.png","天才":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10210.png","圣盾使":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10211.png","狙神":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10212.png","法师":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10213.png","司令":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10214.png","战斗学院":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10188.png","卡牌大师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10189.png","龙的传人":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10190.png","魄罗之心":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10191.png","至高天":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10192.png","水晶玫瑰":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10193.png","假面摔角手":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10194.png","小怪兽训练师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10195.png","大宗师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10196.png","荆棘之兴":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10197.png","超级战队":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10198.png","斗魂战士":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10199.png","星之守护者":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10200.png","兵王":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10201.png","奥德赛":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10202.png"},n=t=>a[t]||"",o=t=>{if(!t||!t.image_url)return"";if(t.image_url.endsWith(".png"))return t.image_url;const e=t.image_url.split("/"),i=e.pop(),a=i.split(".")[0];return a&&/^\d+$/.test(a)?`https://game.gtimg.cn/images/lol/act/img/tft/champions/${a}.png`:t.image_url}},8469:function(t,e,i){var a=i(9504),n=i(507),o=i(4402),l=o.Set,s=o.proto,r=a(s.forEach),c=a(s.keys),u=c(new l).next;t.exports=function(t,e,i){return i?n({iterator:c(t),next:u},e):r(t,e)}},8527:function(t,e,i){var a=i(7080),n=i(4402).has,o=i(5170),l=i(3789),s=i(507),r=i(9539);t.exports=function(t){var e=a(this),i=l(t);if(o(e)<i.size)return!1;var c=i.getIterator();return!1!==s(c,function(t){if(!n(e,t))return r(c,"normal",!1)})}},8750:function(t,e,i){var a=i(7080),n=i(4402),o=i(5170),l=i(3789),s=i(8469),r=i(507),c=n.Set,u=n.add,p=n.has;t.exports=function(t){var e=a(this),i=l(t),n=new c;return o(e)>i.size?r(i.getIterator(),function(t){p(e,t)&&u(n,t)}):s(e,function(t){i.includes(t)&&u(n,t)}),n}},9286:function(t,e,i){var a=i(4402),n=i(8469),o=a.Set,l=a.add;t.exports=function(t){var e=new o;return n(t,function(t){l(e,t)}),e}},9835:function(t){t.exports=function(t){try{var e=new Set,i={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},a=e[t](i);return 1===a.size&&4===a.values().next().value}catch(n){return!1}}}}]);
//# sourceMappingURL=886.0f6805c9.js.map