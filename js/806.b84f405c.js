"use strict";(self["webpackChunktft_frontend"]=self["webpackChunktft_frontend"]||[]).push([[806],{1701:function(a,t,e){var i=e(6518),l=e(9565),s=e(9306),n=e(8551),o=e(1767),c=e(9462),m=e(6319),r=e(9539),p=e(684),g=e(4549),d=e(6395),u=!d&&!p("map",function(){}),h=!d&&!u&&g("map",TypeError),f=d||u||h,k=c(function(){var a=this.iterator,t=n(l(this.next,a)),e=this.done=!!t.done;if(!e)return m(a,this.mapper,[t.value,this.counter++],!0)});i({target:"Iterator",proto:!0,real:!0,forced:f},{map:function(a){n(this);try{s(a)}catch(t){r(this,"throw",t)}return h?l(h,this,a):new k(o(this),{mapper:a})}})},7364:function(a,t,e){e.d(t,{A:function(){return _}});var i=e(641),l=e(33),s=e(3751);const n={class:"image-wrapper"},o=["src","alt"],c={class:"overlay"},m={class:"trait-list"},r=["src","alt"],p={class:"trait-name"},g={key:0,class:"admin-actions"},d={class:"bottom-bar"},u={class:"champion-name"},h={class:"champion-cost"};function f(a,t,e,f,k,b){const C=(0,i.g2)("Edit"),v=(0,i.g2)("el-icon"),F=(0,i.g2)("el-button"),_=(0,i.g2)("Delete"),y=(0,i.g2)("Coin");return(0,i.uX)(),(0,i.CE)("div",{class:"champion-card-reborn",onClick:t[2]||(t[2]=t=>a.$emit("click",e.champion))},[(0,i.Lk)("div",n,[(0,i.Lk)("img",{src:e.champion.image_url,class:"bg-image",alt:e.champion.name},null,8,o),(0,i.Lk)("div",c,[(0,i.Lk)("ul",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(f.sortedTraits,a=>((0,i.uX)(),(0,i.CE)("li",{key:a.id,class:"trait-item"},[(0,i.Lk)("img",{src:f.getTraitIcon(a.name),alt:a.name,class:"trait-icon"},null,8,r),(0,i.Lk)("span",p,(0,l.v_)(a.name),1)]))),128))])]),e.isAdmin?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(F,{circle:"",type:"primary",size:"small",onClick:t[0]||(t[0]=(0,s.D$)(t=>a.$emit("edit",e.champion),["stop"]))},{default:(0,i.k6)(()=>[(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(C)]),_:1})]),_:1}),(0,i.bF)(F,{circle:"",type:"danger",size:"small",onClick:t[1]||(t[1]=(0,s.D$)(t=>a.$emit("delete",e.champion),["stop"]))},{default:(0,i.k6)(()=>[(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(_)]),_:1})]),_:1})])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",d,[(0,i.Lk)("h3",u,(0,l.v_)(e.champion.name),1),(0,i.Lk)("div",h,[(0,i.bF)(v,null,{default:(0,i.k6)(()=>[(0,i.bF)(y)]),_:1}),(0,i.Lk)("span",null,(0,l.v_)(e.champion.cost),1)])])])}var k=e(8548),b=e(8192),C={name:"ChampionDisplayCard",components:{Coin:k.KOj,Edit:k.ffu,Delete:k.epd},props:{champion:{type:Object,required:!0},isAdmin:{type:Boolean,default:!1}},emits:["edit","delete","click"],setup(a){const t=(0,i.EW)(()=>a.champion&&a.champion.traits?[...a.champion.traits].sort((a,t)=>"origin"===a.type&&"origin"!==t.type?-1:"origin"!==a.type&&"origin"===t.type?1:0):[]);return{getTraitIcon:b.Sc,sortedTraits:t}}},v=e(6262);const F=(0,v.A)(C,[["render",f],["__scopeId","data-v-22fd1072"]]);var _=F},7806:function(a,t,e){e.r(t),e.d(t,{default:function(){return I}});var i=e(641),l=e(33);const s={class:"champions-container"},n={class:"card-header"},o={class:"card-header"},c={key:1,class:"champion-grid"},m={key:0},r={class:"champion-detail-content"},p={class:"left-panel"},g={class:"champion-avatar-container"},d=["src","alt"],u={class:"right-panel"},h={class:"trait-list"},f=["src","alt"],k={class:"trait-name"},b={class:"dialog-footer"};function C(a,t,e,C,v,F){const _=(0,i.g2)("el-button"),y=(0,i.g2)("el-option"),V=(0,i.g2)("el-select"),E=(0,i.g2)("el-form-item"),w=(0,i.g2)("el-option-group"),L=(0,i.g2)("el-form"),X=(0,i.g2)("el-card"),I=(0,i.g2)("el-col"),W=(0,i.g2)("el-row"),D=(0,i.g2)("el-empty"),A=(0,i.g2)("ChampionDisplayCard"),K=(0,i.g2)("el-dialog"),T=(0,i.g2)("el-input");return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(W,{gutter:20},{default:(0,i.k6)(()=>[(0,i.bF)(I,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(X,{class:"filter-card"},{header:(0,i.k6)(()=>[(0,i.Lk)("div",n,[t[11]||(t[11]=(0,i.Lk)("span",null,"棋子筛选",-1)),C.isAdmin?((0,i.uX)(),(0,i.Wv)(_,{key:0,type:"primary",size:"small",onClick:C.showAddChampionDialog},{default:(0,i.k6)(()=>[...t[10]||(t[10]=[(0,i.eW)(" 添加棋子 ",-1)])]),_:1},8,["onClick"])):(0,i.Q3)("",!0)])]),default:(0,i.k6)(()=>[(0,i.bF)(L,{inline:!0,model:C.filterForm,class:"filter-form"},{default:(0,i.k6)(()=>[(0,i.bF)(E,{label:"费用"},{default:(0,i.k6)(()=>[(0,i.bF)(V,{modelValue:C.filterForm.cost,"onUpdate:modelValue":t[0]||(t[0]=a=>C.filterForm.cost=a),placeholder:"选择费用",clearable:""},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.costs,a=>((0,i.uX)(),(0,i.Wv)(y,{key:a,label:`${a}金`,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(E,{label:"羁绊"},{default:(0,i.k6)(()=>[(0,i.bF)(V,{modelValue:C.filterForm.traitId,"onUpdate:modelValue":t[1]||(t[1]=a=>C.filterForm.traitId=a),placeholder:"选择羁绊",clearable:""},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.traitGroups,a=>((0,i.uX)(),(0,i.Wv)(w,{key:a.type,label:a.label},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.traits,a=>((0,i.uX)(),(0,i.Wv)(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(E,null,{default:(0,i.k6)(()=>[(0,i.bF)(_,{type:"primary",onClick:C.handleFilter},{default:(0,i.k6)(()=>[...t[12]||(t[12]=[(0,i.eW)("筛选",-1)])]),_:1},8,["onClick"]),(0,i.bF)(_,{onClick:C.resetFilter},{default:(0,i.k6)(()=>[...t[13]||(t[13]=[(0,i.eW)("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1}),(0,i.bF)(W,{gutter:20},{default:(0,i.k6)(()=>[(0,i.bF)(I,{span:24},{default:(0,i.k6)(()=>[(0,i.bF)(X,{class:"champion-list-card"},{header:(0,i.k6)(()=>[(0,i.Lk)("div",o,[t[14]||(t[14]=(0,i.Lk)("span",null,"棋子列表",-1)),(0,i.bF)(V,{modelValue:C.sortOption,"onUpdate:modelValue":t[2]||(t[2]=a=>C.sortOption=a),placeholder:"排序",size:"small"},{default:(0,i.k6)(()=>[(0,i.bF)(y,{label:"费用升序",value:"costAsc"}),(0,i.bF)(y,{label:"费用降序",value:"costDesc"}),(0,i.bF)(y,{label:"名称升序",value:"nameAsc"}),(0,i.bF)(y,{label:"名称降序",value:"nameDesc"})]),_:1},8,["modelValue"])])]),default:(0,i.k6)(()=>[0===C.champions.length?((0,i.uX)(),(0,i.Wv)(D,{key:0,description:"没有找到棋子"})):((0,i.uX)(),(0,i.CE)("div",c,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.sortedChampions,a=>((0,i.uX)(),(0,i.Wv)(A,{key:a.id,champion:a,"is-admin":C.isAdmin,onEdit:C.editChampion,onDelete:C.deleteChampion,onClick:t=>C.showChampionDetail(a)},null,8,["champion","is-admin","onEdit","onDelete","onClick"]))),128))]))]),_:1})]),_:1})]),_:1}),(0,i.bF)(K,{modelValue:C.championDetailVisible,"onUpdate:modelValue":t[3]||(t[3]=a=>C.championDetailVisible=a),title:C.selectedChampion?C.selectedChampion.name:"棋子详情",width:"50%",class:"champion-detail-dialog"},{default:(0,i.k6)(()=>[C.selectedChampion?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("div",r,[(0,i.Lk)("div",p,[(0,i.Lk)("div",g,[(0,i.Lk)("img",{src:C.getChampionAvatarUrl(C.selectedChampion),alt:C.selectedChampion.name,class:"champion-detail-avatar"},null,8,d),C.selectedChampion.cost?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["champion-cost-badge",`cost-${C.selectedChampion.cost}`])},(0,l.v_)(C.selectedChampion.cost),3)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",u,[(0,i.Lk)("h2",null,(0,l.v_)(C.selectedChampion.name),1),(0,i.Lk)("div",h,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.sortedSelectedChampionTraits,a=>((0,i.uX)(),(0,i.CE)("div",{key:a.id,class:"trait-item"},[(0,i.Lk)("img",{src:C.getTraitIcon(a.name),alt:a.name,class:"trait-icon"},null,8,f),(0,i.Lk)("span",k,(0,l.v_)(a.name),1)]))),128))])])])])):(0,i.Q3)("",!0)]),_:1},8,["modelValue","title"]),(0,i.bF)(K,{modelValue:C.championFormVisible,"onUpdate:modelValue":t[9]||(t[9]=a=>C.championFormVisible=a),title:C.isEditing?"编辑棋子":"添加棋子",width:"40%"},{footer:(0,i.k6)(()=>[(0,i.Lk)("span",b,[(0,i.bF)(_,{onClick:t[8]||(t[8]=a=>C.championFormVisible=!1)},{default:(0,i.k6)(()=>[...t[15]||(t[15]=[(0,i.eW)("取消",-1)])]),_:1}),(0,i.bF)(_,{type:"primary",onClick:C.saveChampion},{default:(0,i.k6)(()=>[...t[16]||(t[16]=[(0,i.eW)("保存",-1)])]),_:1},8,["onClick"])])]),default:(0,i.k6)(()=>[(0,i.bF)(L,{model:C.championForm,"label-width":"100px"},{default:(0,i.k6)(()=>[(0,i.bF)(E,{label:"名称",required:""},{default:(0,i.k6)(()=>[(0,i.bF)(T,{modelValue:C.championForm.name,"onUpdate:modelValue":t[4]||(t[4]=a=>C.championForm.name=a),placeholder:"请输入棋子名称"},null,8,["modelValue"])]),_:1}),(0,i.bF)(E,{label:"费用",required:""},{default:(0,i.k6)(()=>[(0,i.bF)(V,{modelValue:C.championForm.cost,"onUpdate:modelValue":t[5]||(t[5]=a=>C.championForm.cost=a),placeholder:"选择费用"},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.costs,a=>((0,i.uX)(),(0,i.Wv)(y,{key:a,label:`${a}金`,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(E,{label:"羁绊",required:""},{default:(0,i.k6)(()=>[(0,i.bF)(V,{modelValue:C.championForm.traits,"onUpdate:modelValue":t[6]||(t[6]=a=>C.championForm.traits=a),multiple:"",placeholder:"选择羁绊",style:{width:"100%"}},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.traitGroups,a=>((0,i.uX)(),(0,i.Wv)(w,{key:a.type,label:a.label},{default:(0,i.k6)(()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.traits,a=>((0,i.uX)(),(0,i.Wv)(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,i.bF)(E,{label:"图片URL"},{default:(0,i.k6)(()=>[(0,i.bF)(T,{modelValue:C.championForm.image_url,"onUpdate:modelValue":t[7]||(t[7]=a=>C.championForm.image_url=a),placeholder:"请输入图片URL"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}e(4114),e(8111),e(7588),e(1701);var v=e(953),F=e(6278),_=e(163),y=e(7918),V=e(7364),E=e(8192),w={name:"ChampionsView",components:{ChampionDisplayCard:V.A},setup(){const a=(0,F.Pj)(),t=(0,i.EW)(()=>a.state.champions.champions),e=(0,i.EW)(()=>a.state.traits.traits),l=(0,i.EW)(()=>a.state.loading),s=(0,v.KR)(!0),n=(0,v.Kh)({cost:null,traitId:null}),o=(0,v.KR)("costAsc"),c=(0,v.KR)(!1),m=(0,v.KR)(!1),r=(0,v.KR)(null),p=(0,v.KR)(!1),g=(0,v.Kh)({id:null,name:"",cost:null,traits:[],image_url:""}),d=[1,2,3,4,5],u="https://via.placeholder.com/100x100?text=TFT",h=(0,i.EW)(()=>{const a={origin:{type:"origin",label:"种族",traits:[]},class:{type:"class",label:"职业",traits:[]}};return e.value.forEach(t=>{"origin"===t.type?a.origin.traits.push(t):"class"===t.type&&a.class.traits.push(t)}),Object.values(a)}),f=(0,i.EW)(()=>{if(!t.value)return[];const a=[...t.value];switch(o.value){case"costAsc":a.sort((a,t)=>a.cost-t.cost);break;case"costDesc":a.sort((a,t)=>t.cost-a.cost);break;case"nameAsc":a.sort((a,t)=>a.name.localeCompare(t.name));break;case"nameDesc":a.sort((a,t)=>t.name.localeCompare(a.name));break}return a}),k=(0,i.EW)(()=>r.value&&r.value.traits?[...r.value.traits].sort((a,t)=>"origin"===a.type&&"origin"!==t.type?-1:"origin"!==a.type&&"origin"===t.type?1:0):[]),b=async()=>{try{n.cost?await a.dispatch("champions/fetchChampionsByCost",n.cost):n.traitId?await a.dispatch("champions/fetchChampionsByTrait",n.traitId):await a.dispatch("champions/fetchChampions")}catch(t){_.nk.error("加载棋子数据失败")}},C=()=>{n.cost=null,n.traitId=null,a.dispatch("champions/fetchChampions")},V=a=>{r.value=a,c.value=!0},w=a=>"origin"===a?"success":"primary",L=()=>{p.value=!1,g.id=null,g.name="",g.cost=null,g.traits=[],g.image_url="",m.value=!0},X=a=>{p.value=!0,g.id=a.id,g.name=a.name,g.cost=a.cost,g.traits=a.traits.map(a=>a.id),g.image_url=a.image_url||"",m.value=!0},I=async()=>{try{if(!g.name||!g.cost||0===g.traits.length)return void _.nk.warning("请填写必填字段");p.value?(await a.dispatch("champions/updateChampion",{championId:g.id,championData:{name:g.name,cost:g.cost,traits:g.traits,image_url:g.image_url}}),_.nk.success("棋子更新成功")):(await a.dispatch("champions/createChampion",{name:g.name,cost:g.cost,traits:g.traits,image_url:g.image_url}),_.nk.success("棋子添加成功")),m.value=!1,await a.dispatch("champions/fetchChampions")}catch(t){_.nk.error("保存棋子失败")}},W=t=>{y.s.confirm(`确定要删除棋子 ${t.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await a.dispatch("champions/deleteChampion",t.id),_.nk.success("棋子删除成功"),await a.dispatch("champions/fetchChampions")}catch(e){_.nk.error("删除棋子失败")}}).catch(()=>{})};return(0,i.sV)(async()=>{try{await Promise.all([a.dispatch("champions/fetchChampions"),a.dispatch("traits/fetchTraits")])}catch(t){_.nk.error("加载数据失败")}}),{champions:t,traits:e,loading:l,isAdmin:s,filterForm:n,sortOption:o,championDetailVisible:c,championFormVisible:m,selectedChampion:r,isEditing:p,championForm:g,costs:d,defaultImage:u,traitGroups:h,sortedChampions:f,handleFilter:b,resetFilter:C,showChampionDetail:V,getTraitTagType:w,showAddChampionDialog:L,editChampion:X,saveChampion:I,deleteChampion:W,sortedSelectedChampionTraits:k,getTraitIcon:E.Sc,getChampionAvatarUrl:E.qB}}},L=e(6262);const X=(0,L.A)(w,[["render",C],["__scopeId","data-v-cb0433be"]]);var I=X},8192:function(a,t,e){e.d(t,{Sc:function(){return l},qB:function(){return s}});const i={"护卫":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10204.png","裁决使者":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10205.png","决斗大师":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10206.png","刀锋领主":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10207.png","重量级斗士":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10208.png","主宰":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10209.png","天才":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10210.png","圣盾使":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10211.png","狙神":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10212.png","法师":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10213.png","司令":"https://game.gtimg.cn/images/lol/act/img/tft/classes/10214.png","战斗学院":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10188.png","卡牌大师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10189.png","龙的传人":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10190.png","魄罗之心":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10191.png","至高天":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10192.png","水晶玫瑰":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10193.png","假面摔角手":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10194.png","小怪兽训练师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10195.png","大宗师":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10196.png","荆棘之兴":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10197.png","超级战队":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10198.png","斗魂战士":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10199.png","星之守护者":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10200.png","兵王":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10201.png","奥德赛":"https://game.gtimg.cn/images/lol/act/img/tft/origins/10202.png"},l=a=>i[a]||"",s=a=>{if(!a||!a.image_url)return"";if(a.image_url.endsWith(".png"))return a.image_url;const t=a.image_url.split("/"),e=t.pop(),i=e.split(".")[0];return i&&/^\d+$/.test(i)?`https://game.gtimg.cn/images/lol/act/img/tft/champions/${i}.png`:a.image_url}}}]);
//# sourceMappingURL=806.b84f405c.js.map